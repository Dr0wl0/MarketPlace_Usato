<div class="annunci-container">
  <header class="annunci-header">
    <h1 class="annunci-title">
      <span class="logo-icon">üõçÔ∏è</span> ThriftGo!
    </h1>

    <nav class="annunci-nav">
      <button class="annunci-nav-btn" (click)="currentView = 'list'">
        <i class="fas fa-list"></i> Visualizza annunci
      </button>
      <button class="annunci-nav-btn" (click)="currentView = 'form'">
        <i class="fas fa-plus-circle"></i> Nuovo annuncio
      </button>
    </nav>

    <div class="annunci-filters">
        <div class="filter-group">
          <label><i class="fas fa-filter"></i> Filtra per categoria</label>
          <select [(ngModel)]="selectedCategory">
            <option [ngValue]="null">Tutte le categorie</option>
            <option *ngFor="let cat of categorie" [ngValue]="cat.name">
              {{ cat.name }}
            </option>
          </select>
        </div>
      </div>

  </header>

  <main class="annunci-main-content">
    <!-- LISTA -->
    <section *ngIf="currentView === 'list'" class="annunci-list-section">
      <h2 class="section-title">
        <i class="fas fa-tag"></i> Lista Annunci
      </h2>

      <div *ngIf="filteredAnnunci.length > 0; else noAnnunci" class="annunci-grid">
        <article *ngFor="let annuncio of filteredAnnunci" class="annuncio-card" [class.favorite]="annuncio.favourite">
          <div class="card-badge">{{ annuncio.categoryName }}</div>
          <h3>{{ annuncio.listingName }}</h3>
          <p class="annuncio-description">{{ annuncio.description }}</p>
          <div class="annuncio-footer">
            <span class="price">‚Ç¨{{ annuncio.price }}</span>
            <button class="favourite-btn" (click)="toggleFavourite(annuncio)">
              {{ annuncio.favourite ? '‚≠ê Preferito' : '‚òÜ Aggiungi' }}
            </button>
            <button class="carrello-btn" (click)="addCarrello(annuncio)">
              {{  'Aggiungi al carrello' }}
            </button>
          </div>
        </article>
      </div>

      <ng-template #noAnnunci>
        <div class="no-annunci">
          <i class="fas fa-search"></i>
          <p>Nessun annuncio disponibile</p>
        </div>
      </ng-template>
    </section>

    <!-- FORM -->
    <section *ngIf="currentView === 'form'" class="annunci-form-section">
      <h2 class="section-title">
        <i class="fas fa-plus-circle"></i> Nuovo Annuncio
      </h2>

      <form class="new-annuncio-form" novalidate>
        <div class="form-group">
          <label><i class="fas fa-heading"></i> Nome annuncio</label>
          <input type="text" [(ngModel)]="newAnnuncio.listingName" name="listingName" required />
        </div>

        <div class="form-group">
          <label><i class="fas fa-align-left"></i> Descrizione</label>
          <textarea [(ngModel)]="newAnnuncio.description" name="description" rows="4" required></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label><i class="fas fa-euro-sign"></i> Prezzo (‚Ç¨)</label>
            <input type="number" [(ngModel)]="newAnnuncio.price" name="price" required min="0" />
          </div>

          <div class="form-group">
            <label><i class="fas fa-tags"></i> Categoria</label>
            <select [(ngModel)]="newAnnuncio.categoryName" name="categoryName" required>
              <option [ngValue]="''" disabled selected>Seleziona categoria</option>
              <option *ngFor="let cat of categorie" [ngValue]="cat.name">
                {{ cat.name }}
              </option>
            </select>
          </div>
        </div>

        <button type="button" class="submit-btn" (click)="publishAnnuncio()">
          <i class="fas fa-paper-plane"></i> Pubblica Annuncio
        </button>
      </form>
    </section>
  </main>
</div>
