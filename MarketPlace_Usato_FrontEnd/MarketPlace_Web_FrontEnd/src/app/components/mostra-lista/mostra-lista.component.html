<div class="annunci-container">
  <header class="annunci-header">
    <h1 class="annunci-title">
      <span class="logo-icon">üõçÔ∏è</span> ThriftGo!
    </h1>
    
    <nav class="annunci-nav">
      <button class="annunci-nav-btn active" (click)="currentView = 'list'">
        <i class="fas fa-list"></i> Visualizza annunci
      </button>
      <button class="annunci-nav-btn" (click)="currentView = 'form'">
        <i class="fas fa-plus-circle"></i> Nuovo annuncio
      </button>
      <button class="annunci-nav-btn">
        <i class="fas fa-heart"></i> Preferiti
      </button>
    </nav>
  </header>

  <main class="annunci-main-content">
    <!-- Vista Lista Annunci -->
    <section *ngIf="currentView === 'list'" class="annunci-list-section">
      <h2 class="section-title">
        <i class="fas fa-tag"></i> Lista Annunci
      </h2>
      
      <div class="annunci-filters">
        <div class="filter-group">
          <label><i class="fas fa-euro-sign"></i> Range di prezzo</label>
          <input type="range" class="price-filter">
          <div class="price-labels">
            <span>‚Ç¨0</span>
            <span>‚Ç¨50</span>
            <span>‚Ç¨100+</span>
          </div>
        </div>
        
        <div class="filter-group">
          <label><i class="fas fa-filter"></i> Filtra per categoria</label>
          <select [(ngModel)]="selectedCategory">
            <option [ngValue]="null">Tutte le categorie</option>
            <option *ngFor="let cat of (categoryLabels | keyvalue)" [ngValue]="cat.key">
              {{ cat.value }}
            </option>
          </select>
        </div>
      </div>

      <div *ngIf="filteredAnnunci.length > 0; else noAnnunci" class="annunci-grid">
        <article *ngFor="let annuncio of filteredAnnunci" class="annuncio-card" [class.favorite]="annuncio.favourite">
          <div class="card-badge">{{ getCategoryLabel(annuncio.category) }}</div>
          <h3>{{ annuncio.listingName }}</h3>
          <p class="annuncio-description">{{ annuncio.description }}</p>
          <div class="annuncio-footer">
            <span class="price">‚Ç¨{{ annuncio.price }}</span>
            <button class="favourite-btn" (click)="toggleFavourite(annuncio)">
              {{ annuncio.favourite ? '‚≠ê Preferito' : '‚òÜ Aggiungi' }}
            </button>
          </div>
        </article>
      </div>

      <ng-template #noAnnunci>
        <div class="no-annunci">
          <i class="fas fa-search"></i>
          <p>Nessun annuncio disponibile</p>
        </div>
      </ng-template>
    </section>

    <!-- Vista Nuovo Annuncio -->
    <section *ngIf="currentView === 'form'" class="annunci-form-section">
      <h2 class="section-title">
        <i class="fas fa-plus-circle"></i> Nuovo Annuncio
      </h2>
      
      <form class="new-annuncio-form">
        <div class="form-group">
          <label><i class="fas fa-heading"></i> Nome annuncio</label>
          <input type="text" [(ngModel)]="newAnnuncio.listingName" name="listingName" placeholder="Es. iPhone 12 usato">
        </div>

        <div class="form-group">
          <label><i class="fas fa-align-left"></i> Descrizione</label>
          <textarea [(ngModel)]="newAnnuncio.description" name="description" rows="4" 
                    placeholder="Descrivi l'articolo in dettaglio..."></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label><i class="fas fa-euro-sign"></i> Prezzo (‚Ç¨)</label>
            <input type="number" [(ngModel)]="newAnnuncio.price" name="price" placeholder="0">
          </div>

          <div class="form-group">
            <label><i class="fas fa-tags"></i> Categoria</label>
            <select [(ngModel)]="newAnnuncio.category" name="category">
              <option *ngFor="let categoryKey of (categoryLabels | keyvalue)" [value]="categoryKey.key">
                {{ categoryKey.value }}
              </option>
            </select>
          </div>
        </div>

        <button type="button" class="submit-btn" (click)="publishAnnuncio()">
          <i class="fas fa-paper-plane"></i> Pubblica Annuncio
        </button>
      </form>
    </section>
  </main>
</div>